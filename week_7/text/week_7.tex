\documentclass[12pt]{article}
\usepackage[left=1in, right=1in]{geometry}

\usepackage{url}

%\usepackage{arydshln}

\usepackage{graphicx}

\usepackage{color}
\definecolor{light-gray}{gray}{0.30}

\usepackage{verbatim}

\usepackage{listings}
\lstset{
	frame=leftline,
	frameround=ttff,
	numbers=left,
	language=C++,
	showstringspaces=False,
	extendedchars=False,
	numberstyle=\footnotesize,
	basicstyle=\small\ttfamily,
	commentstyle=\color{light-gray}\slshape,
	belowskip=1.5em,
	aboveskip=1.5em,
	fontadjust,
	tabsize=4,		%added for proper tab alligning
	xleftmargin=0cm,
	xrightmargin=0cm
}


\newcommand{\desc}[1]{\textit{#1} \vspace{1em}}

\title{\itshape Exercises week 7 - Multi-threading I}

\author{
	Klaas Isaac Bijlsma \\ s2394480
	\and
	David Vroom \\ s2309939
}

\date{\today}

\begin{document}
\maketitle

\section*{Exercise 49}
\desc{Learn to apply basic multi-threading}

We used the following code.
\lstinputlisting[title=\texttt{main.ih}]{../ex49/main.ih}
\lstinputlisting[title=\texttt{waiting.cc}]{../ex49/waiting.cc}
\lstinputlisting[title=\texttt{main.cc}]{../ex49/main.cc}

\clearpage

\section*{Exercise 50}
\desc{Learn to perform time conversions}

We used the following code.
\lstinputlisting[title=\texttt{main.cc}]{../ex50/main.cc}

\clearpage

\section*{Exercise 51}
\desc{Learn to use the chrono/clock facilities}

We used the following code.
\lstinputlisting[title=\texttt{main.cc}]{../ex51/main.cc}

\clearpage

\section*{Exercise 52}
\desc{Learn to define a thread with objects that aren't functors}

We used the following code.

\lstinputlisting[title=\texttt{handler/handler.ih}]{../ex52/handler/handler.ih}    
\lstinputlisting[title=\texttt{handler/handler.h}]{../ex52/handler/handler.h}    
\lstinputlisting[title=\texttt{handler/shift.cc}]{../ex52/handler/shift.cc}    
\lstinputlisting[title=\texttt{main.ih}]{../ex52/main.ih}
\lstinputlisting[title=\texttt{callshift.cc}]{../ex52/callshift.cc}
\lstinputlisting[title=\texttt{main.cc}]{../ex52/main.cc}

\clearpage

\section*{Exercise 53}
\desc{Learn to design a simple producer/consumer program}

The thread that reads lines from cin and pushes them into the queue is the main function itself. A separate thread uses polling to find out if something is available in the queue. If so, it prints this to a file and removes the line from the queue. However, if it finds an empty queue (via the member function \texttt{empty}), it may be because all lines from cin are read, or the main thread hasn't finished inserting a new line yet. Because of the latter case, the separate thread should not end when it finds an empty queue, but it should just try again some time later. In the former case, it should be informed that it can end. This is accomplished by main setting a datamember \texttt{d\_finished}, and let the other thread check for its state.   
So if all lines have been read from cin and pushed, main should not just end, because the other thread isn't finished.  
We used the following code.
\lstinputlisting[title=\texttt{storage/storage.ih}]{../ex53/storage/storage.ih}    
\lstinputlisting[title=\texttt{storage/storage.h}]{../ex53/storage/storage.h}    
\lstinputlisting[title=\texttt{storage/empty.cc}]{../ex53/storage/empty.cc} 

\lstinputlisting[title=\texttt{storage/finished.cc}]{../ex53/storage/finished.cc} 
\lstinputlisting[title=\texttt{storage/front.cc}]{../ex53/storage/front.cc} 
\lstinputlisting[title=\texttt{storage/pop.cc}]{../ex53/storage/pop.cc} 
\lstinputlisting[title=\texttt{storage/push.cc}]{../ex53/storage/push.cc} 
\lstinputlisting[title=\texttt{storage/setfinished.cc}]{../ex53/storage/setfinished.cc} 
\lstinputlisting[title=\texttt{main.ih}]{../ex53/main.ih}
\lstinputlisting[title=\texttt{processq.cc}]{../ex53/processq.cc}
\lstinputlisting[title=\texttt{main.cc}]{../ex53/main.cc}

\clearpage

\end{document}
